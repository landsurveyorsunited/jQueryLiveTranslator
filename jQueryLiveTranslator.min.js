/*
	Name: jQueryLiveTranslator
	Author: Ilyas Bakouch
	Twitter: @vladimire
	Website: http://www.isbkch.me
	Version: 1.0
*/(function(e,t,n,r){var i={initialize:function(t,n){this.packages=[];this.loaded=e.Deferred();this.translatable=true;this.options=e.extend({},e.fn.jqLTranslate.options,n);var r=this.getUserLanguage();if(typeof t==="string"){this.packages.push(t)}else{this.packages=t}if(this.isTranslatable(r)){this.loadLanguages()}else{this.translatable=false}return this.loaded.promise()},getUserLanguage:function(){var t=this.options.langToUse||this.options.forceLang||navigator.language||navigator.userLanguage;e.defaultLanguage=t;t=t.replace(/_/,"-").toLowerCase();if(t.length>3){t=t.substring(0,3)+t.substring(3).toUpperCase();this.languages=[t.substring(0,2),t.substring(3).toUpperCase()]}else{this.languages=[t]}e.fn.jqLTranslate.userLang=t;return t},isTranslatable:function(t){if(this.options.defaultLang===t){return false}else{return e.inArray(t,this.options.skip)===-1}},loadLanguages:function(){var t=0,n=i.languages.length*i.packages.length;this.translatedStrings={};e.each(i.packages,function(r,s){var o=s;e.each(i.languages,function(e,r){i.getLanguage(o,r).done(i.storeLangFile).always(function(){t++;if(t>=n){i.loaded.resolve()}})})})},getLanguage:function(t,n){var r=this,i="",s=e.Deferred();if(r.options.path){i=r.options.path+"/"}var o=i+[t,n].join("-")+".json";console.log("language: "+n);console.log("loading file: "+o);e.ajax({url:o,dataType:"json",cache:r.options.cache,async:r.options.asyncLangLoad}).done(function(e){s.resolve(e)}).fail(function(){if(r.options.fallbackLang){o=i+[t,r.options.fallbackLang].join("-")+".json";e.ajax({url:o,dataType:"json",cache:r.options.cache,async:r.options.asyncLangLoad}).done(function(e){s.resolve(e)})}else{s.reject()}});return s},storeLangFile:function(t){e.extend(i.translatedStrings,t)},translate:function(){var t=e(this),n=t.data("translate");if(i.translatable){if(i.translatedStrings[n]){if(i.translatedStrings[n].length===r){i.translateElement(t,i.translatedStrings[n].text);delete i.translatedStrings[n].text;t.attr(i.translatedStrings[n])}else{i.translateElement(t,i.translatedStrings[n])}}}if(typeof i.options.onComplete==="function"){i.options.onComplete.apply(this,arguments)}return t},translateElement:function(e,t){if(e.is("input")||e.is("textarea")){if(e.is("[placeholder]")){e.attr("placeholder",t)}else{e.val(t)}}else if(e.is("optgroup")){e.attr("label",t)}else if(e.is("img")){e.attr("alt",t)}else{e.html(t)}}};e.fn.jqLTranslate=function(e,t){var n=this;i.initialize(e,t).done(function(){n.each(i.translate)});return this};e.fn.jqLTranslate.options={asyncLangLoad:true,cache:true,defaultLang:null,langToUse:"fr",fallbackLang:null,forceLang:null,onComplete:null,path:"lang",skip:[]}})(jQuery,window,document)